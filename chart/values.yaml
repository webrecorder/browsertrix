# Settings
# =========================================
name: browsertrix-cloud

# when running in the cloud, set this value to cloud-specific block storage
# keep empty to use hostPath (eg. on minikube)
volume_storage_class:


registration_enabled: 1
jwt_token_lifetime_minutes: 60

superuser:
  # set this to enable a superuser admin
  email: admin@example.com

  # optional: if not set, automatically generated
  password:


# API Image
# =========================================
api_image: "webrecorder/browsertrix-api"
api_pull_policy: "Never"

api_password_secret: "c9085f33ecce4347aa1d69339e16c499"

api_num_replicas: 1

api_requests_cpu: "25m"
api_limits_cpu: "100m"

api_requests_memory: "100M"
api_limits_memory: "256M"


# Nginx Image
# =========================================
nginx_image: "nginx"
nginx_pull_policy: "IfNotPresent"

nginx_limit_cpu: "100m"
nginx_requests_cpu: "25m"


# MongoDB Image
# =========================================
mongo_local: true

mongo_host: "local-mongo"

mongo_image: "mongo"
mongo_pull_policy: "IfNotPresent"

mongo_limit_cpu: "100m"
mongo_requests_cpu: "25m"

mongo_auth:
  username: root
  password: example 


# Redis Image
# =========================================
redis_local: true

redis_image: "redis"
redis_pull_policy: "IfNotPresent"

redis_url: "redis://local-redis.default:6379/1"



# Crawler Image
# =========================================

crawler_image: "webrecorder/browsertrix-crawler:latest"
crawler_pull_policy: "IfNotPresent"

crawler_namespace: "crawlers"

# num retries
crawl_retries: 1

# browsertrix-crawler args:
crawler_args: "--timeout 90 --logging stats,behaviors,debug --generateWACZ --screencastPort 9037"


# Local Minio Pod (optional)
# =========================================
# set to true to use a local minio image
minio_local: true

minio_scheme: "http"
minio_host: "local-minio.default:9000"

minio_image: minio/minio
minio_mc_image: minio/mc
minio_pull_policy: "IfNotPresent"

minio_local_bucket_name: &local_bucket_name "test-bucket"


# Storage
# =========================================
# should include the local minio bucket, if enabled, and any other available buckets for default storage

storages:
  - name: "default"
    access_key: "ADMIN"
    secret_key: "PASSW0RD"
    bucket_name: *local_bucket_name

    endpoint_url: "http://local-minio.default:9000/"


# Email Options
# =========================================
email:
  # email sending is enabled when 'smtp_host' is set to non-empty value
  #ex: smtp_host: smtp.gmail.com
  smtp_host: ""
  smtp_port: 587
  sender_email: example@example.com
  password: password


# Deployment options
# =========================================

# Ingress (Optional)
# Optional: if 'host' is set, a publicly accessible Ingress controller is created with an SSL cert (using letsencrypt)
ingress:
  host: "btrix.cloud"
  cert_email: "test@example.com"
  scheme: "http"
  tls: false




# Optional: configure load balancing
service:
  type: NodePort
#   annotations:
#     service.beta.kubernetes.io/aws-load-balancer-internal: "true"
#     helm.sh/resource-policy: keep
